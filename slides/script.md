# The College Application Problem

Max Kapur

## Introduction

Hello, my name is Max. I am a grad student at SNU, and today I will be speaking about our research into a combinatorial optimization problem that we call the college application problem.

To the best of our knowledge, we are the first to study this problem systematically. In a nutshell, this problem involves purchasing a portfolio of random variables having the maximal expected maximum value subject to a budget constraint. The word "maximum" appears there twice on purpose, which gives this problem a unique mathematical form. Today, we will explain this optimization problem and how it can be used to model the college application strategy. We'll take a look at preexisting solution heuristics, and the kinds of biases that prevent them from finding the optimum. Then we will introduce our findings about this problem, including its theoretical properties and a variety of algorithms. While this presentation aims to be self-contained, for those who are interested in a richer methodological exposition, I would like to direct your attention to our arXiv paper; the full reference is given at the end.

Our problem spans several methodological universes. First, it's a kind of asset allocation problem, in the sense that you are buying products based on uncertain information about their utility, and have to manage the attendant risk/reward tradeoff. Second, this problem generalizes the knapsack problem, meaning that is is NP-complete, and if we want an efficient solution, we have to settle for approximation methods based on combinatorial techniques. Finally, we note that the objective function is submodular, and our results help us position this problem at the easier end of the larger class of submodular maximization problems.

## Model
Let's talk about our model.

We restrict our attention to a single student's decisionmaking in a college market having $m$ schools. Their indices are given by the set $C$, and it's helpful to think of $c_j$ as the "name" of the $j$th school. By focusing on a single student, we can use her academic records, extracurriculars and so on to estimate her probability of being admitted to each school. We denote this probability by $f_j$. There a variety of techniques, like logistic regression, that you could use to perform this estimation, but for our purposes, we just assume that $f_j$ is known exogeneously. The associated Bernoulli variable we call $Z_j$, which equals one if the student is admitted, and zero if not, to the school in question. We assume these are statistically independent. Now the student's principle decision is where to apply. We use $X$ to denote the set of schools that the student applies to, which we can call her application portfolio. It would be nice if you could apply to every school, but we know that there are application fees, there is the time cost of filling out application forms, and in some jurisdictions there are legal limits on the number of schools you can apply to. We express these costs using a knapsack constraint, where $g_j$ is the cost of applying to school $j$, and $H$ is the total budget to spend on applications.

Let's continue building our model by introducing a notion of utility. For each school, we have a nonnegative utility parameter $t_j$ which represents the utility that the student receives if she goes there. We can assume these are sorted in increasing order. And we let $t_0$ give the utility of the outside option. That is, if the student doesn't get into any competitive colleges, then she receives $t_0$ units of utility. As we argue in the paper, it is without loss of generality to assume that $t_0 = 0$. Now, the utility that the student experiences from the college admissions process is whatever the $t_j$-value is for the school she actually attends, that is, the best school to which she both applies and is admitted. We refer to the expected value of this statistic—that is, the expected maximum over the $t_j Z_j$s–as the application portfolio's valuation, notated $v(X)$.

We need to put $v(X)$ into some sort of tractable form. To get there, we introduce the function $p_j(X)$, which gives the probability that the student attends (enrolls at) $c_j$. This will happen only if she applies to $c_j$, gets into $c_j$, and does not get into any of the schools she likes better than $c_j$, which are precisely the schools with a higher index. This enables us to express $p_j(X)$ as is shown on the screen, and if we take the inner product with $t$, we get the student's overall expected utility. It is this final function that we will seek to maximize.

Here is a concise expression of the college application problem. We will work mainly with the first form, in which $X$ is a set, but it can also be expressed as an integer optimization problem; you can verify for yourself that these two problem are equivalent. We observe that the integer NLP form has a polynomial objective function of degree $m$. It is neither concave nor convex.

## The status quo
Let's consider the status quo in college application.

In Korea as well as in the US, there is a lucrative industry called "college admissions consulting," which involves estimating students' admissions probabilities, coaching them on standardized tests, helping them produce their application materials, and finally, decided where to apply. If you read marketing materials from these companies, they often invoke the idea of safety schools, which are schools that have low utility but are relatively easy to get into, and reach schools, which are highly selective but highly desirable, and target schools, which are somewhere in between. A common belief is the idea that you should a roughly even mix of these three. On the right is a Korean newspaper article that's giving essentially the same advice. This is a very legible heuristic, but is it accurate? What does the evidence show?

I'm now going to give you a chance to try making your own application strategy. In these picture, we've plotted the admissions probability on the x-axis, and the utility on the y-axis. If, for example, a school were in the top right, then that would be a school that you can easily get into and that you really like—so you should obviously apply there. But in the typical scenario, schools like that don't exist. Instead, there is correlation between attractiveness and selectiveness. In this picture, then, we can identify schools on the top left as "reach schools," and those on the bottom right as "safety schools." Now, let's suppose that all the schools in this picture have the same application cost, so that we are working with essentially a constraint on the number of schools we can apply to. If you can only choose three schools, which three will you pick? If you are like me, then maybe you will pick some schools spread out within the overall distribution.

Taking a look at the optimal solution, we can see first that the schools lie on a sort of efficient frontier. This makes sense: a school that's in the interior distribution is trivially dominated by schools to the upper right of it, which have both higher utility and better admissions odds. We also that three schools chosen are spread out, rather than close together. One could reasonably label them as reach, target, and safety schools. So perhaps the admissions consultants aren't entirely off base.

We can call this reach/safety school strategy a kind of "distributive heuristic." It tells you that the schools in your portfolio should vary in their risk characteristics. However, it doesn't specify exactly where the boundary is between a reach school and a target school and a safety school. If you try to pick schools that are spread out visually on the graph above, then we argue in our paper that this distributive heuristic actually ends up being unnecessarily risk averse, and this effect is exaggerated as the application budget increases. As an alternative, another heuristic we might propose is the "linearization heuristic." The idea here is, if you apply to just one school, then the expected utility is $f_j t_j$, so why not use that as the coefficient in a linear objective function and solve the corresponding knapsack problem? Nevermind that the knapsack problem is NP-complete, this solution can be an arbitrarily poor fit for the college application problem, as we show by pathological example. So, in terms of guaranteed optimality, we're left with just enumerating all of the possible portfolios, which is exactly what one scholar did in an equilibrium analysis of the higher education market. This study was working with clustered data, so that $m = 8$, but we want to solve larger problems. Our algorithms are both tractable in terms of computation time, and have guaranteed accuracy properties.

## Our algorithms
For the remainder of the presentation, we will be taking a look at our solution algorithms.

First, let's focus on a special case that can be solved in polynomial time. This is the case we saw earlier, where instead of heterogeneous application costs, we have simply a cardinality constraint on the number of applications we can submit. This is similar to the Korean admissions process, in which there is not application fee, but you cannot apply to more than three schools in the main admissions cycle. We are able to show that the optimal portfolios in this case have a special structure: When the application limit increases from $h$ to $h+1$, the optimal application portfolio is formed by just adding one school to the one before it. We call this the "nestedness" property, and it implies that a greedy algorithm that adds schools one at a time is optimal. Through a variable-elimination technique, we reduce the computation of the objective function to amortized unit time, which brings the computation time down to a quadratic. Our Julia implementation of this algorithm is quite fast. We note that this nestedness result is stronger than the well-known approximation result for greedy submodular optimization over cardinality constraints given in this reference.

To get a feel for what this nestedness property really means, here is a small, fictional admissions market with 8 schools in it. We have each school's name, as well as the input data, namely $f_j$ and $t_j$. And the output of our algorithm is shown in the priority column. The nestedness property means that if the application limit $h$ is $3$, then we should apply to the schools with "priority" 1, 2, and 3: Jupiter University, Venus University, and Pluto College. I have also indicated the utility associated with each optimal portfolio. If we plot these valuations in ascending order, we get ...

... this concave valuation curve. In this special case, we can prove that the valuation curve always exhibits diminishing returns to the application budget. This is a somewhat typical result in submodular maximization problems.

Now, let's look at the general problem. To reiterate, this problem is NP-complete, as we show by a reduction from the knapsack problem. But we offer four algorithms which come with various pros and cons. The first is a branch-and-bound scheme; while our implementation is not the most effective algorithm of the four, the linear relaxation we provide could be used as the basis for a more competitive algorithm. The second is a dynamic program that iterates on the total portfolio expenditures. This algorithm is exact, and runs in pseudopolynomial time in $m$ and $H$. Arguably, in typical college application instances, the application costs are small integers, and this algorithm is very fast in such a situation. Next, we use a different dynamic program based on rounding the portfolio valuations down to a fixed-point decimal to derive a fully polynomial time approximation scheme, or FPTAS. This is an important finding, because FPTAS's do not exist for general submodular maximization, so their existence for our problem suggests that college application is a relatively easy member of the class. Finally, for comparative purpose, we also outline a simulated annealing heuristic which offers no approximation guarantee but is very good in practice.

## Conclusion
Let's move onto the conclusion.

College application is an intruiguing optimization problem, with its unusual "maximax" form and integrality constraint. While on its surface, it looks like a submodular maximization problem, in terms of the solution techniques and approximation results we can derive, it behaves more like the knapsack problem. And the analogy with knapsack continues in the special case, where each $g_j = 1$ and the problem can be solved in polynomial time by a greedy algorithm. Next, we note that college application is a matter of practical importance and value. Right now, if you try to hire an America college consultant, they will charge an average of 200 dollars per hour. Obviously, they do more than just solve optimization problems, but the high cost of admissions consulting services was one motivation for us to open source our code and algorithms. Links to my GitHub and our arXiv paper are given on the following slide. In the paper, we also propose several extensions to the model: a way to implement a risk-aversion parameter, distribution constraints like those in the Korean admissions model, and technical improvements to the implementation of the algorithms. GitHub makes it easy to supply feedback, so if you have any comments for us that you can't fit into this session, we'd greatly appreciate hearing from you at your convenience. Thank you.

<!-- 17:30 -->
